<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Murillo">

<title>Clase 1: Introducción a tidyverse y conceptos básicos de limpieza de datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Clase1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Clase1_files/libs/quarto-html/quarto.js"></script>
<script src="Clase1_files/libs/quarto-html/popper.min.js"></script>
<script src="Clase1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Clase1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Clase1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Clase1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Clase1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Clase1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Clase1_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Clase 1: Introducción a tidyverse y conceptos básicos de limpieza de datos</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>David Murillo </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>En esta primera clase, exploraremos Tidyverse, un conjunto de paquetes en R diseñado para la manipulación, visualización y análisis de datos de manera eficiente y estructurada. Nos enfocaremos en los conceptos fundamentales para la limpieza de datos, una etapa clave en cualquier análisis, que nos permitirá transformar datos crudos en información lista para su exploración y modelado.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Introducción a R y tidyverse</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Carga y exploración de datos</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Selección y filtrado de datos con dplyr</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">Transformación de datos con mutate() y rename()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false" href="">Manejo de valores faltantes con tidyr</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false" href="">Uso de tuberias (%&gt;%) o (|&gt;)</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>¿Qué es tidyverse?</p>
<p>El <a href="https://www.tidyverse.org/">Tidyverse</a> “es una colección estructurada de paquetes de R diseñados para la ciencia de datos. Todos los paquetes comparten una filosofía de diseño subyacente, una gramática común y estructuras de datos coherentes”.</p>
<p>Cargar paquete</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Al cargar el paquete tidyverse, aparecerá un mensaje con una lista de los paquetes principales que se están adjuntando a la sesión. Este mensaje también indica posibles conflictos entre funciones de tidyverse y otros paquetes de R.</p>
<p>Explicación de cada sección:</p>
<p>“Attaching core tidyverse packages”</p>
<p>Indica que se están cargando los paquetes centrales del tidyverse, en este caso: dplyr: Manipulación de datos forcats: Manejo de factores ggplot2: Visualización de datos lubridate: Manejo de fechas y horas purrr: Programación funcional readr: Importación de datos stringr: Manipulación de cadenas de texto tibble: Estructura de datos moderna tidyr: Organización y limpieza de datos “Conflicts”</p>
<p>Muestra funciones que están en conflicto con otras del paquete stats (incluido en R por defecto).</p>
<p>dplyr::filter() y dplyr::lag() tienen el mismo nombre que stats::filter() y stats::lag(), por lo que al llamar filter() o lag(), R usará la versión de dplyr a menos que se especifique lo contrario.</p>
<p>“Use the conflicted package to force all conflicts to become errors”</p>
<p>Sugiere usar el paquete conflicted para evitar ambigüedades y hacer que R indique un error si hay conflictos en lugar de elegir automáticamente una versión de la función.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>En este primer ejercicio, trabajaremos con diferentes formatos de datos para aprender a importarlos correctamente en R. Exploraremos diversas estructuras de archivos y los paquetes adecuados para su lectura.</p>
<p>Formatos de datos a importar:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">1) Excel (.xlsx)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">CSV (valores separados por comas)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">CSV delimitado por punto y coma (;)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">TXT (archivo de texto plano)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">JSON (formato de intercambio de datos)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">Shapefile (datos espaciales .gpkg)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false" href="">Raster (datos espaciales en formato de imagen)</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Data: Emisiones de GHG en la Producción de Alimentos</p>
<p>Proviene de la reconocida fuente Our World in Data, específicamente del proyecto de Environmental Impacts of Food Production. Esta fuente es ampliamente respetada y utilizada en investigaciones para proporcionar datos precisos y detallados sobre diversos aspectos ambientales, incluyendo los impactos de la producción de alimentos en el medio ambiente.</p>
<p>La tabla muestra las emisiones de CO2 equivalente (CO2e) en la producción de diferentes tipos de alimentos, tomando en cuenta las emisiones producidas por kg de alimento producido, por 100 g de proteína y 1000 kcal.</p>
<p>Incluye variables relevantes como:</p>
<p>Tipo de alimento: Clasificación de los alimentos analizados.</p>
<p>Emisiones de CO2 equivalente (kg CO2e): La cantidad de emisiones de CO2 equivalente generada por la producción de cada tipo de alimento.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Capstone <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"data/Capstone_IA_R_V3.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>El conjunto de datos contiene un registro de cada impacto con vida silvestre reportado en aeronaves militares, comerciales o civiles entre 1990 y 2015. Cada fila incluye la fecha del incidente, el operador de la aeronave, la marca y modelo de la aeronave, la marca y modelo del motor, el nombre y ubicación del aeropuerto, el nombre y la cantidad de la especie involucrada, y los daños sufridos por la aeronave.</p>
<p>La base de datos de impactos con vida silvestre fue compilada a partir de informes recibidos de aeropuertos, aerolíneas y pilotos, y publicada por la Administración Federal de Aviación (FAA).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>AccidentesAereos <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/airkraf_accident.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>La base de datos fue recopilada en Yoro, Honduras, y registra la abundancia de aves en una zona de producción de café. Incluye algunas de las variables medidas en campo, así como la ubicación de los sitios de muestreo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Habitat <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"data/AvesHabitat.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p>La base de datos bettles.txt. Estos datos muestran las abundancias de escarabajos en tres tipos de hábitat en el Reino Unido. Hay 6 réplicas para cada hábitat (Wood, Grass, Edge).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Escarabajos <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"data/bettles.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<p>Esta base de datos muestra las calificaciones de varios estudiantes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'jsonlite'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">"data/Students_Grading_Dataset.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<p>Este archivo contiene registros del Guardabarranco Centroamérica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.11.2, GDAL 3.8.2, PROJ 9.3.1; sf_use_s2() is TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Momotido <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">"data/Momot.gpkg"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<p>Capa raster que representa la elevación sobre el nivel del mar en Costa Rica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>terra 1.7.71</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'terra'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tidyr':

    extract</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Elevacion <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"data/CRI_elv_msk.tif"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>De las bases de datos vistas anteriormente, para nuestro próximo ejercicio utilizaremos la base de datos <code>Students_Grading_Dataset.json</code>, a la cual denominaremos “Estudiantes”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="st">"data/Students_Grading_Dataset.json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En esta base de datos, podemos observar que cada estudiante tiene asignado un ID, género, edad, departamento, porcentaje de asistencia y calificaciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Estudiantes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5000 obs. of  23 variables:
 $ Student_ID                : chr  "S1000" "S1001" "S1002" "S1003" ...
 $ First_Name                : chr  "Omar" "Maria" "Ahmed" "Omar" ...
 $ Last_Name                 : chr  "Williams" "Brown" "Jones" "Williams" ...
 $ Email                     : chr  "student0@university.com" "student1@university.com" "student2@university.com" "student3@university.com" ...
 $ Gender                    : chr  "Female" "Male" "Male" "Female" ...
 $ Age                       : int  22 18 24 24 23 21 24 19 21 22 ...
 $ Department                : chr  "Engineering" "Engineering" "Business" "Mathematics" ...
 $ Attendance (%)            : num  52.3 97.3 57.2 95.2 54.2 ...
 $ Midterm_Score             : num  55 97.2 67 47.8 46.6 ...
 $ Final_Score               : num  57.8 45.8 93.7 80.6 78.9 ...
 $ Assignments_Avg           : num  84.2 NA 67.7 66.1 96.8 ...
 $ Quizzes_Avg               : num  74.1 94.2 85.7 93.5 83.7 ...
 $ Participation_Score       : num  3.99 8.32 5.05 6.54 5.97 6.38 2.3 3.73 0.51 5.88 ...
 $ Projects_Score            : num  85.9 55.6 73.8 92.1 68.4 ...
 $ Total_Score               : num  56.1 50.6 70.3 61.6 66.1 ...
 $ Grade                     : chr  "F" "A" "D" "A" ...
 $ Study_Hours_per_Week      : num  6.2 19 20.7 24.8 15.4 8.5 21.3 27.3 8 9.6 ...
 $ Extracurricular_Activities: chr  "No" "No" "No" "Yes" ...
 $ Internet_Access_at_Home   : chr  "Yes" "Yes" "Yes" "Yes" ...
 $ Parent_Education_Level    : chr  "High School" "None" "Master's" "High School" ...
 $ Family_Income_Level       : chr  "Medium" "Medium" "Low" "High" ...
 $ Stress_Level (1-10)       : int  5 4 6 3 2 1 5 4 9 10 ...
 $ Sleep_Hours_per_Night     : num  4.7 9 6.2 6.7 7.1 5 6.4 4.3 8.8 6.4 ...</code></pre>
</div>
</div>
<p>En este ejercicio, queremos conocer los diferentes departamentos y filtrar la base de datos para trabajar con los datos de cada uno por separado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(Estudiantes<span class="sc">$</span>Department)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Business          CS Engineering Mathematics 
       1006        2022        1469         503 </code></pre>
</div>
</div>
<p>Al revisar los departamentos, encontramos que hay cuatro: Business, CS, Engineering y Mathematics, siendo CS el departamento con el mayor número de estudiantes, con un total de 2022.</p>
<p>Podemos utilizar <code>filter</code> para filtrar los datos en función de cualquier criterio que elijamos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>CS <span class="ot">&lt;-</span> <span class="fu">filter</span>(Estudiantes, Department <span class="sc">==</span> <span class="st">"CS"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(CS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Student_ID First_Name Last_Name                    Email Gender Age
1      S1004       John     Smith  student4@university.com Female  23
2      S1008       Omar     Smith  student8@university.com Female  21
3      S1010       John     Smith student10@university.com Female  23
4      S1015      Ahmed     Jones student15@university.com   Male  18
5      S1016      Maria     Jones student16@university.com Female  21
6      S1018       Liam     Jones student18@university.com   Male  20
  Department Attendance (%) Midterm_Score Final_Score Assignments_Avg
1         CS          54.18         46.59       78.89           96.85
2         CS          85.97         84.42       90.87           57.05
3         CS          85.72         83.52       97.43           67.29
4         CS          86.72         63.93       91.07           81.00
5         CS          75.05         90.11       56.81           67.34
6         CS          65.14         40.68       42.28           50.34
  Quizzes_Avg Participation_Score Projects_Score Total_Score Grade
1       83.70                5.97          68.42       66.13     F
2       56.33                0.51          94.01       95.62     A
3       76.95                4.59          97.62       58.25     A
4       66.88                6.14          77.57       52.37     A
5       67.59                8.48          63.16       73.21     F
6       94.28                9.44          56.29       65.33     B
  Study_Hours_per_Week Extracurricular_Activities Internet_Access_at_Home
1                 15.4                        Yes                     Yes
2                  8.0                         No                      No
3                 13.2                         No                     Yes
4                 25.3                         No                     Yes
5                 29.7                         No                     Yes
6                 17.4                         No                     Yes
  Parent_Education_Level Family_Income_Level Stress_Level (1-10)
1            High School                High                   2
2             Bachelor's                 Low                   9
3            High School                 Low                   1
4                   None                High                   2
5                   None                 Low                   3
6                   None              Medium                   9
  Sleep_Hours_per_Night
1                   7.1
2                   8.8
3                   4.1
4                   8.6
5                   6.1
6                   4.8</code></pre>
</div>
</div>
<p>Otra opción es filtrar en función de un umbral. Por ejemplo, podemos seleccionar a los estudiantes con calificaciones superiores a 80</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>App <span class="ot">&lt;-</span> <span class="fu">filter</span>(Estudiantes, Final_Score <span class="sc">&gt;</span> <span class="dv">80</span> )</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(App)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Student_ID First_Name Last_Name                    Email Gender Age
1      S1002      Ahmed     Jones  student2@university.com   Male  24
2      S1003       Omar  Williams  student3@university.com Female  24
3      S1006      Ahmed     Jones  student6@university.com   Male  24
4      S1008       Omar     Smith  student8@university.com Female  21
5      S1009       Sara     Smith  student9@university.com Female  22
6      S1010       John     Smith student10@university.com Female  23
   Department Attendance (%) Midterm_Score Final_Score Assignments_Avg
1    Business          57.19         67.05       93.68           67.70
2 Mathematics          95.15         47.79       80.63           66.06
3    Business          57.60         66.26       89.07           84.52
4          CS          85.97         84.42       90.87           57.05
5 Engineering          64.01         87.96       98.47           96.98
6          CS          85.72         83.52       97.43           67.29
  Quizzes_Avg Participation_Score Projects_Score Total_Score Grade
1       85.70                5.05          73.79       70.30     D
2       93.51                6.54          92.12       61.63     A
3       98.40                2.30          93.65       83.21     F
4       56.33                0.51          94.01       95.62     A
5       55.63                5.88          78.60       84.99     A
6       76.95                4.59          97.62       58.25     A
  Study_Hours_per_Week Extracurricular_Activities Internet_Access_at_Home
1                 20.7                         No                     Yes
2                 24.8                        Yes                     Yes
3                 21.3                         No                     Yes
4                  8.0                         No                      No
5                  9.6                         No                     Yes
6                 13.2                         No                     Yes
  Parent_Education_Level Family_Income_Level Stress_Level (1-10)
1               Master's                 Low                   6
2            High School                High                   3
3                   &lt;NA&gt;                 Low                   5
4             Bachelor's                 Low                   9
5                   None              Medium                  10
6            High School                 Low                   1
  Sleep_Hours_per_Night
1                   6.2
2                   6.7
3                   6.4
4                   8.8
5                   6.4
6                   4.1</code></pre>
</div>
</div>
<p>También es posible combinar condiciones. Por ejemplo, filtrar a los estudiantes con calificaciones mayores a 80 y que pertenezcan al departamento “CS”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>App_CS <span class="ot">&lt;-</span> <span class="fu">filter</span>(Estudiantes, Final_Score <span class="sc">&gt;</span> <span class="dv">80</span> <span class="sc">&amp;</span> Department <span class="sc">==</span> <span class="st">"CS"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(App_CS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Student_ID First_Name Last_Name                    Email Gender Age
1      S1008       Omar     Smith  student8@university.com Female  21
2      S1010       John     Smith student10@university.com Female  23
3      S1015      Ahmed     Jones student15@university.com   Male  18
4      S1023       Liam  Williams student23@university.com Female  23
5      S1032      Maria     Smith student32@university.com Female  21
6      S1036      Maria     Davis student36@university.com Female  18
  Department Attendance (%) Midterm_Score Final_Score Assignments_Avg
1         CS          85.97         84.42       90.87           57.05
2         CS          85.72         83.52       97.43           67.29
3         CS          86.72         63.93       91.07           81.00
4         CS          83.63         50.85       81.72           58.58
5         CS             NA         61.59       98.60           93.06
6         CS          71.96         47.46       86.10           56.84
  Quizzes_Avg Participation_Score Projects_Score Total_Score Grade
1       56.33                0.51          94.01       95.62     A
2       76.95                4.59          97.62       58.25     A
3       66.88                6.14          77.57       52.37     A
4       65.54                4.48          89.61       88.63     D
5       61.09                8.21          55.65       51.99     D
6       63.17                6.67          77.85       81.78     F
  Study_Hours_per_Week Extracurricular_Activities Internet_Access_at_Home
1                  8.0                         No                      No
2                 13.2                         No                     Yes
3                 25.3                         No                     Yes
4                 18.5                         No                     Yes
5                 28.9                         No                     Yes
6                 12.9                         No                     Yes
  Parent_Education_Level Family_Income_Level Stress_Level (1-10)
1             Bachelor's                 Low                   9
2            High School                 Low                   1
3                   None                High                   2
4               Master's                 Low                   1
5                   None              Medium                   9
6             Bachelor's                 Low                  10
  Sleep_Hours_per_Night
1                   8.8
2                   4.1
3                   8.6
4                   8.6
5                   4.4
6                   8.8</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<p>En este ejercicio, continuaremos utilizando la base de datos “Estudiantes”. Nos enfocaremos en transformar los datos, específicamente renombrando algunas de las variables para hacerlas más comprensibles o ajustarlas a un formato más adecuado.</p>
<p>Uso de rename()</p>
<p>El función rename() de dplyr se utiliza para cambiar el nombre de una o más columnas en un data frame. La sintaxis básica es la siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">rename</span>(Estudiantes, <span class="st">"Nombre"</span> <span class="ot">=</span>  <span class="st">"First_Name"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">rename</span>(Estudiantes, <span class="st">"Apellido"</span> <span class="ot">=</span>  <span class="st">"Last_Name"</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">rename</span>(Estudiantes, <span class="st">"Asistencia"</span> <span class="ot">=</span>  <span class="st">"Attendance (%)"</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Estudiantes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Student_ID Nombre Apellido                   Email Gender Age  Department
1      S1000   Omar Williams student0@university.com Female  22 Engineering
2      S1001  Maria    Brown student1@university.com   Male  18 Engineering
3      S1002  Ahmed    Jones student2@university.com   Male  24    Business
4      S1003   Omar Williams student3@university.com Female  24 Mathematics
5      S1004   John    Smith student4@university.com Female  23          CS
6      S1005   Liam    Brown student5@university.com   Male  21 Engineering
  Asistencia Midterm_Score Final_Score Assignments_Avg Quizzes_Avg
1      52.29         55.03       57.82           84.22       74.06
2      97.27         97.23       45.80              NA       94.24
3      57.19         67.05       93.68           67.70       85.70
4      95.15         47.79       80.63           66.06       93.51
5      54.18         46.59       78.89           96.85       83.70
6         NA         78.85       43.53           71.40       52.20
  Participation_Score Projects_Score Total_Score Grade Study_Hours_per_Week
1                3.99          85.90       56.09     F                  6.2
2                8.32          55.65       50.64     A                 19.0
3                5.05          73.79       70.30     D                 20.7
4                6.54          92.12       61.63     A                 24.8
5                5.97          68.42       66.13     F                 15.4
6                6.38          67.29       62.08     B                  8.5
  Extracurricular_Activities Internet_Access_at_Home Parent_Education_Level
1                         No                     Yes            High School
2                         No                     Yes                   None
3                         No                     Yes               Master's
4                        Yes                     Yes            High School
5                        Yes                     Yes            High School
6                        Yes                     Yes                    PhD
  Family_Income_Level Stress_Level (1-10) Sleep_Hours_per_Night
1              Medium                   5                   4.7
2              Medium                   4                   9.0
3                 Low                   6                   6.2
4                High                   3                   6.7
5                High                   2                   7.1
6                High                   1                   5.0</code></pre>
</div>
</div>
<p>Uso de mutate()</p>
<p>Por otro lado, mutate() se utiliza para crear nuevas columnas o modificar las existentes dentro de un data frame. mutate() permite realizar transformaciones como cálculos, conversiones de tipos de datos, y más.</p>
<p>Ejemplo de creación de una nueva columna con mutate():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>Estudiantes <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Estudiantes, <span class="at">Asistencia_Promedio =</span> Asistencia <span class="sc">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este código crea una nueva columna llamada Asistencia_Promedio, que contiene los valores de asistencia en un formato decimal (de 0 a 1 en lugar de un porcentaje).</p>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<p>En este ejercicio, exploraremos cómo manejar los valores faltantes (NA) en nuestros datos utilizando el paquete tidyr. Los valores faltantes son comunes en muchos conjuntos de datos y, dependiendo del contexto, debemos tratarlos de diferentes maneras, como eliminarlos, reemplazarlos o incluso imputarlos.</p>
<p>Identificación de Valores Faltantes</p>
<p>Antes de realizar cualquier operación, es importante identificar los valores faltantes en el conjunto de datos. En R, los valores faltantes se representan con NA. Para detectar cuántos valores faltantes hay en cada columna, podemos usar la función summarise_all() junto con is.na():</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Food <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Food_Production.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise_all</span>(Food, <span class="sc">~</span><span class="fu">sum</span>(<span class="fu">is.na</span>(.)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Food.product Land.use.change Animal.Feed Farm Processing Transport Packging
1            0               0           0    0          0         0        0
  Retail Total_emissions
1      0               0
  Eutrophying.emissions.per.1000kcal..gPO.eq.per.1000kcal.
1                                                       10
  Eutrophying.emissions.per.kilogram..gPO.eq.per.kilogram.
1                                                        5
  Eutrophying.emissions.per.100g.protein..gPO.eq.per.100.grams.protein.
1                                                                    16
  Freshwater.withdrawals.per.1000kcal..liters.per.1000kcal.
1                                                        13
  Freshwater.withdrawals.per.100g.protein..liters.per.100g.protein.
1                                                                17
  Freshwater.withdrawals.per.kilogram..liters.per.kilogram.
1                                                         5
  Greenhouse.gas.emissions.per.1000kcal..kgCO.eq.per.1000kcal.
1                                                           10
  Greenhouse.gas.emissions.per.100g.protein..kgCO.eq.per.100g.protein.
1                                                                   16
  Land.use.per.1000kcal..m..per.1000kcal.
1                                      10
  Land.use.per.kilogram..m..per.kilogram.
1                                       5
  Land.use.per.100g.protein..m..per.100g.protein.
1                                              16
  Scarcity.weighted.water.use.per.kilogram..liters.per.kilogram.
1                                                              5
  Scarcity.weighted.water.use.per.100g.protein..liters.per.100g.protein.
1                                                                     17
  Scarcity.weighted.water.use.per.1000kcal..liters.per.1000.kilocalories.
1                                                                      13</code></pre>
</div>
</div>
<p>Eliminar Valores Faltantes con drop_na()</p>
<p>Una forma común de manejar los valores faltantes es eliminarlos. La función drop_na() de tidyr permite eliminar las filas que contienen valores NA en alguna de las columnas seleccionadas.</p>
<p>Para eliminar las filas con NA en cualquier columna:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Food_na_drop <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(Food)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Si solo queremos eliminar filas con valores faltantes en una columna específica:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>Food_drop1 <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(Food, Scarcity.weighted.water.use.per<span class="fl">.1000</span>kcal..liters.per.<span class="fl">1000.</span>kilocalories.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rellenar Valores Faltantes con fill()</p>
<p>En lugar de eliminar los valores faltantes, a veces preferimos reemplazarlos con un valor específico o con el valor anterior o siguiente disponible. La función fill() de tidyr es útil para este propósito.</p>
<p>Imputación de Valores Faltantes</p>
<p>Si decidimos que necesitamos imputar los valores faltantes con un valor específico (como la media o la mediana), podemos hacerlo utilizando mutate() junto con funciones de resumen como mean() o median().</p>
<p>Por ejemplo, para reemplazar los valores faltantes en la columna Final_Score con la media de los valores disponibles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Food2 <span class="ot">&lt;-</span> <span class="fu">rename</span>(Food, <span class="st">"Scarcity1000kcal"</span> <span class="ot">=</span>   <span class="st">"Scarcity.weighted.water.use.per.1000kcal..liters.per.1000.kilocalories."</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>Food_rellenado <span class="ot">&lt;-</span> <span class="fu">mutate</span>(Food2, <span class="at">Scarcity1000kcal =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(Scarcity1000kcal), </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                                                         <span class="fu">mean</span>(Scarcity1000kcal, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                                                         Scarcity1000kcal))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>Food_clean <span class="ot">&lt;-</span> Food <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Producto =</span> Food.product,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Cambio_uso_suelo =</span> Land.use.change,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Alimento_Animal =</span> Animal.Feed,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agricultura =</span> Farm,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Procesamiento =</span> Processing,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Transporte =</span> Transport,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Empaque =</span> Packging,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Comercio =</span> Retail,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Totales =</span> Total_emissions,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Eutrofizacion_1000kcal =</span> Eutrophying.emissions.per<span class="fl">.1000</span>kcal..gPO.eq.per<span class="fl">.1000</span>kcal.,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Eutrofizacion_kg =</span> Eutrophying.emissions.per.kilogram..gPO.eq.per.kilogram.,</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Eutrofizacion_100g_proteina =</span> Eutrophying.emissions.per<span class="fl">.100</span>g.protein..gPO.eq.per.<span class="fl">100.</span>grams.protein.,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Fresca_1000kcal =</span> Freshwater.withdrawals.per<span class="fl">.1000</span>kcal..liters.per<span class="fl">.1000</span>kcal.,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Fresca_100g_proteina =</span> Freshwater.withdrawals.per<span class="fl">.100</span>g.protein..liters.per<span class="fl">.100</span>g.protein.,</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Fresca_kg =</span> Freshwater.withdrawals.per.kilogram..liters.per.kilogram.,</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Gases_Efecto_Invernadero_1000kcal =</span> Greenhouse.gas.emissions.per<span class="fl">.1000</span>kcal..kgCO.eq.per<span class="fl">.1000</span>kcal.,</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Emisiones_Gases_Efecto_Invernadero_100g_proteina =</span> Greenhouse.gas.emissions.per<span class="fl">.100</span>g.protein..kgCO.eq.per<span class="fl">.100</span>g.protein.,</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Uso_Suelo_1000kcal =</span> Land.use.per<span class="fl">.1000</span>kcal..m..per<span class="fl">.1000</span>kcal.,</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Uso_Suelo_kg =</span> Land.use.per.kilogram..m..per.kilogram.,</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Uso_Suelo_100g_proteina =</span> Land.use.per<span class="fl">.100</span>g.protein..m..per<span class="fl">.100</span>g.protein.,</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Escasez_kg =</span> Scarcity.weighted.water.use.per.kilogram..liters.per.kilogram.,</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Escasez_100g_proteina =</span> Scarcity.weighted.water.use.per<span class="fl">.100</span>g.protein..liters.per<span class="fl">.100</span>g.protein.,</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Agua_Escasez_1000kcal =</span> Scarcity.weighted.water.use.per<span class="fl">.1000</span>kcal..liters.per.<span class="fl">1000.</span>kilocalories.</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>Food_clean <span class="ot">&lt;-</span> Food_clean <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Emisiones_Totales <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Impacto_relativo_GEI =</span> Emisiones_Gases_Efecto_Invernadero_1000kcal <span class="sc">/</span> Emisiones_Totales)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Food_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   21 obs. of  24 variables:
 $ Producto                                        : chr  "Rice" "Cane Sugar" "Groundnuts" "Tofu" ...
 $ Cambio_uso_suelo                                : num  0 1.2 0.4 1 3.1 3.1 0.1 0.2 -0.4 3.7 ...
 $ Alimento_Animal                                 : num  0 0 0 0 0 0 0 0 0 0 ...
 $ Agricultura                                     : num  3.6 0.5 1.4 0.5 1.5 2.1 2.1 2.3 4.3 10.4 ...
 $ Procesamiento                                   : num  0.1 0 0.4 0.8 0.3 1.3 0.2 0.2 0.7 0.6 ...
 $ Transporte                                      : num  0.1 0.8 0.1 0.2 0.3 0.2 0.2 0.2 0.5 0.1 ...
 $ Empaque                                         : num  0.1 0.1 0.1 0.2 0.8 0.9 0.9 0.8 0.9 1.6 ...
 $ Comercio                                        : num  0.1 0 0 0.3 0 0 0 0 0 0.1 ...
 $ Emisiones_Totales                               : num  4 2.6 2.4 3 6 7.6 3.5 3.7 6 16.5 ...
 $ Emisiones_Eutrofizacion_1000kcal                : num  9.51 4.82 2.44 NA NA ...
 $ Emisiones_Eutrofizacion_kg                      : num  35.1 16.9 14.1 NA 11.7 ...
 $ Emisiones_Eutrofizacion_100g_proteina           : num  49.4 NA 5.4 NA NA ...
 $ Agua_Fresca_1000kcal                            : num  610 177 319 NA NA ...
 $ Agua_Fresca_100g_proteina                       : num  3167 NA 708 NA NA ...
 $ Agua_Fresca_kg                                  : num  2248 620 1852 NA 415 ...
 $ Emisiones_Gases_Efecto_Invernadero_1000kcal     : num  1.207 0.912 0.557 NA NA ...
 $ Emisiones_Gases_Efecto_Invernadero_100g_proteina: num  6.27 NA 1.23 NA NA ...
 $ Uso_Suelo_1000kcal                              : num  0.76 0.581 1.571 NA NA ...
 $ Uso_Suelo_kg                                    : num  2.8 2.04 9.11 NA 10.52 ...
 $ Uso_Suelo_100g_proteina                         : num  3.94 NA 3.48 NA NA ...
 $ Agua_Escasez_kg                                 : num  49576 16439 61798 NA 14888 ...
 $ Agua_Escasez_100g_proteina                      : num  69826 NA 23605 NA NA ...
 $ Agua_Escasez_1000kcal                           : num  13450 4683 10655 NA NA ...
 $ Impacto_relativo_GEI                            : num  0.302 0.351 0.232 NA NA ...</code></pre>
</div>
</div>
</div>
</div>
</div>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>